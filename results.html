<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Human Design Results</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <style>
        .results-page {
            background: var(--bg-primary);
            padding: 40px 20px;
        }

        .results-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .results-header {
            text-align: center;
            margin-bottom: 60px;
        }

        .results-header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .results-header p {
            font-size: 1.1rem;
            color: var(--text-secondary);
        }

        .design-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 40px;
        }

        .design-card h2 {
            font-size: 1.8rem;
            margin-bottom: 30px;
            text-align: center;
        }

        .design-basics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .design-item {
            text-align: center;
        }

        .design-item-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 10px;
        }

        .design-item-value {
            font-size: 2rem;
            font-weight: 700;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .design-item-desc {
            font-size: 0.95rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .comparison-section {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 40px;
            margin-bottom: 40px;
        }

        .comparison-section h2 {
            font-size: 1.8rem;
            margin-bottom: 30px;
            text-align: center;
        }

        .comparison-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 40px;
            margin-bottom: 30px;
        }

        .comparison-side h3 {
            font-size: 1.3rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .comparison-side.conditioned h3 {
            color: #ff6b6b;
        }

        .comparison-side.authentic h3 {
            color: #51cf66;
        }

        .comparison-list {
            list-style: none;
            padding: 0;
        }

        .comparison-list li {
            padding: 12px 0;
            border-bottom: 1px solid var(--border-color);
            font-size: 1rem;
        }

        .comparison-list li:last-child {
            border-bottom: none;
        }

        .gap-insight {
            background: rgba(255, 215, 0, 0.1);
            border-left: 4px solid #ffd700;
            padding: 25px;
            margin-top: 30px;
            border-radius: 4px;
        }

        .gap-insight h3 {
            font-size: 1.3rem;
            margin-bottom: 15px;
            color: #ffd700;
        }

        .gap-insight p {
            font-size: 1.05rem;
            line-height: 1.7;
            margin-bottom: 15px;
        }

        .cta-section {
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.1));
            border: 2px solid #ffd700;
            border-radius: 12px;
            padding: 50px;
            text-align: center;
        }

        .cta-section h2 {
            font-size: 2rem;
            margin-bottom: 20px;
        }

        .cta-section p {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .cta-section .price {
            font-size: 3rem;
            font-weight: 700;
            color: #ffd700;
            margin-bottom: 10px;
        }

        .cta-section .price-old {
            font-size: 1.5rem;
            text-decoration: line-through;
            color: var(--text-muted);
            margin-right: 15px;
        }

        .cta-section ul {
            text-align: left;
            max-width: 500px;
            margin: 30px auto;
            list-style: none;
            padding: 0;
        }

        .cta-section ul li {
            padding: 10px 0;
            font-size: 1.05rem;
        }

        .cta-section ul li::before {
            content: "âœ“ ";
            color: #51cf66;
            font-weight: bold;
            margin-right: 10px;
        }

        .btn-massive {
            display: inline-block;
            background: linear-gradient(135deg, #ffd700, #ffa500);
            color: #000;
            font-size: 1.5rem;
            font-weight: 700;
            padding: 25px 60px;
            border-radius: 50px;
            text-decoration: none;
            transition: transform 0.2s;
            margin-top: 20px;
        }

        .btn-massive:hover {
            transform: scale(1.05);
        }

        @media (max-width: 768px) {
            .comparison-grid {
                grid-template-columns: 1fr;
                gap: 30px;
            }

            .design-basics {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">HUMANDESIGN</a>
            <ul class="nav-menu">
                <li><a href="quiz.html" class="nav-link cta-button">BEGIN TEST</a></li>
            </ul>
        </div>
    </nav>

    <main class="main-content results-page">
        <div class="results-container">
            <div class="results-header">
                <h1>Your Human Design</h1>
                <p>Based on your birth data: <span id="birthInfo">Loading...</span></p>
            </div>

            <!-- Core Human Design -->
            <div class="design-card">
                <h2>Your Authentic Design</h2>
                <div class="design-basics">
                    <div class="design-item">
                        <div class="design-item-label">Type</div>
                        <div class="design-item-value" id="hdType">Loading...</div>
                        <div class="design-item-desc" id="hdTypeDesc">How you're designed to interact with life</div>
                    </div>
                    <div class="design-item">
                        <div class="design-item-label">Authority</div>
                        <div class="design-item-value" id="hdAuthority">Loading...</div>
                        <div class="design-item-desc" id="hdAuthorityDesc">Your inner decision-making compass</div>
                    </div>
                    <div class="design-item">
                        <div class="design-item-label">Profile</div>
                        <div class="design-item-value" id="hdProfile">Loading...</div>
                        <div class="design-item-desc" id="hdProfileDesc">Your life theme and purpose</div>
                    </div>
                </div>
            </div>

            <!-- The Gap / Comparison -->
            <div class="comparison-section">
                <h2>Why You Feel Stuck</h2>
                <div class="comparison-grid">
                    <div class="comparison-side conditioned">
                        <h3>How You've Been Living</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 20px; font-size: 0.95rem;">Based on your 100 personality questions</p>
                        <ul class="comparison-list" id="conditionedList">
                            <li>Loading your patterns...</li>
                        </ul>
                    </div>
                    <div class="comparison-side authentic">
                        <h3>How You're Designed to Live</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 20px; font-size: 0.95rem;">Based on your birth chart</p>
                        <ul class="comparison-list" id="authenticList">
                            <li>Loading your design...</li>
                        </ul>
                    </div>
                </div>

                <div class="gap-insight">
                    <h3>ðŸ”¥ The Gap Between Who You Are and Who You Think You Should Be</h3>
                    <p id="gapInsight">Loading your personalized insight...</p>
                    <p><strong>This is why you're exhausted.</strong> You've been living according to conditioning instead of your natural design. The full report shows you exactly how to close this gap and live authentically.</p>
                </div>
            </div>

            <!-- CTA -->
            <div class="cta-section">
                <h2>Get Your Full 40+ Page Report</h2>
                <p>Everything you need to understand and embody your Human Design - delivered within 24 hours</p>

                <div class="price">
                    <span class="price-old">$97</span>
                    $29
                </div>
                <p style="color: #ffd700; font-weight: 600; margin-top: 10px;">70% OFF - Limited Time</p>

                <ul>
                    <li>Your complete Human Design chart explained</li>
                    <li>Detailed Big 5 personality analysis</li>
                    <li>Integration guide: closing the gap</li>
                    <li>Career & relationship insights</li>
                    <li>Deconditioning strategies</li>
                    <li>Life-long reference guide</li>
                </ul>

                <a href="buy.html" class="btn-massive" onclick="trackPurchaseIntent()">GET MY FULL REPORT</a>

                <p style="margin-top: 25px; font-size: 0.9rem; color: var(--text-muted);">
                    ðŸ”’ Secure checkout â€¢ âš¡ Delivered in 24 hours â€¢ âœ… 30-day money-back guarantee
                </p>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="config.js"></script>
    <script type="module">
        // Import required modules
        import { ResultsDisplay } from './assets/results.js';

        // Simple results rendering
        document.addEventListener('DOMContentLoaded', async () => {
            const urlParams = new URLSearchParams(window.location.search);
            const resultId = urlParams.get('id');

            if (!resultId) {
                alert('No result ID found. Please complete the quiz first.');
                window.location.href = 'quiz.html';
                return;
            }

            try {
                // Load from localStorage
                const localData = localStorage.getItem(`hd_result_${resultId}`);
                if (!localData) {
                    throw new Error('Result not found. Please complete the quiz first.');
                }

                const data = JSON.parse(localData);
                console.log('Loaded result data:', data);

                // Display birth info
                const birthInfo = `${data.birth.place} â€¢ ${data.birth.date} â€¢ ${data.birth.time}`;
                document.getElementById('birthInfo').textContent = birthInfo;

                // Display core HD info
                const chart = data.chart_derived;
                document.getElementById('hdType').textContent = chart.type || 'Generator';
                document.getElementById('hdAuthority').textContent = chart.authority || 'Sacral';
                document.getElementById('hdProfile').textContent = chart.profile || '1/3';

                // Type descriptions
                const typeDescs = {
                    'Generator': 'You have sustainable life force energy when doing what you love',
                    'Manifestor': 'You\'re here to initiate and make things happen',
                    'Projector': 'You see people clearly and guide them to success',
                    'Reflector': 'You mirror the health of your environment'
                };
                document.getElementById('hdTypeDesc').textContent = typeDescs[chart.type] || typeDescs['Generator'];

                const authorityDescs = {
                    'Sacral': 'Trust your gut responses - that immediate yes/no feeling',
                    'Emotional': 'You need time to feel your way through decisions',
                    'Splenic': 'Trust your intuitive knowing in the moment',
                    'Ego': 'Make decisions based on what you have will for',
                    'Self-Projected': 'Talk it out and listen to what you hear yourself say'
                };
                document.getElementById('hdAuthorityDesc').textContent = authorityDescs[chart.authority] || authorityDescs['Sacral'];

                // Comparison lists
                const quiz = data.quiz_derived;
                const conditionedList = document.getElementById('conditionedList');
                const authenticList = document.getElementById('authenticList');

                // Conditioned patterns (how they've been living)
                conditionedList.innerHTML = `
                    <li>Making decisions with your mind instead of ${chart.authority} authority</li>
                    <li>Forcing yourself to work in ways that drain you</li>
                    <li>Trying to be someone you're not to fit in</li>
                    <li>Ignoring your natural energy patterns</li>
                `;

                // Authentic design (how they should live)
                const strategies = {
                    'Generator': 'Respond to life - wait for things to light you up',
                    'Manifestor': 'Initiate freely and inform others',
                    'Projector': 'Wait for invitation and recognition',
                    'Reflector': 'Take time (lunar cycle) before big decisions'
                };

                authenticList.innerHTML = `
                    <li>${strategies[chart.type] || strategies['Generator']}</li>
                    <li>Use your ${chart.authority} authority to make decisions</li>
                    <li>Honor your natural energy patterns</li>
                    <li>Stop trying to be a ${chart.type === 'Generator' ? 'Manifestor' : 'Generator'}</li>
                `;

                // Gap insight
                const gapInsight = document.getElementById('gapInsight');
                gapInsight.innerHTML = `You're a <strong>${chart.type}</strong> with <strong>${chart.authority} Authority</strong>, but you've been making decisions with your mind and forcing yourself to work like everyone else. This mismatch is why things feel hard. When you align with your design, life flows.`;

            } catch (error) {
                console.error('Error loading results:', error);
                alert('Error loading your results. Please try again or retake the quiz.');
                window.location.href = 'quiz.html';
            }
        });

        // Track purchase intent
        window.trackPurchaseIntent = function() {
            console.log('Purchase intent tracked');
            if (typeof gtag !== 'undefined') {
                gtag('event', 'purchase_intent', {
                    'event_category': 'conversion',
                    'value': 29
                });
            }
        };
    </script>
</body>
</html>
